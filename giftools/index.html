<!DOCTYPE html><!-- Astro 推荐：使用 <Fragment slot="head"> 注入 head 元素，避免 body 中嵌套 head 导致字符集失效 --><meta charset="utf-8"><title>GIF 编辑器 - 本地处理</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/index.C3i11XiZ.css">
<link rel="stylesheet" href="/_astro/giftools.DIwNngdm.css">
<style>.footer-pocket[data-astro-cid-w3csb3e3]{position:relative;margin-top:48px;margin-bottom:calc(env(safe-area-inset-bottom,0px) + 20px);padding:8px 16px;text-align:center;border-radius:9999px;background:#94a3b826;border:1px solid rgba(148,163,184,.2);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);box-shadow:0 2px 8px #0000000d;user-select:none;max-width:max-content;margin-left:auto;margin-right:auto}.footer-pocket[data-astro-cid-w3csb3e3] small[data-astro-cid-w3csb3e3]{font-size:12px;color:#475569cc;font-weight:400;letter-spacing:.2px}@media(min-width:640px){.footer-pocket[data-astro-cid-w3csb3e3] small[data-astro-cid-w3csb3e3]{font-size:13px}}.footer-pocket[data-astro-cid-w3csb3e3]:hover{background:#94a3b833;border-color:#94a3b84d}
</style><body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col"> <!-- 页面头部导航 --> <header class="w-full flex items-center justify-between p-4 mb-6"> <!-- 左侧：面包屑 + 二级导航（仅 Chatless 页面显示） --> <div class="flex items-center gap-6"> <!-- 面包屑导航 --> <nav class="flex items-center space-x-2 text-sm text-slate-600"> <a href="/" class="hover:text-slate-900 transition-colors">🏠 首页</a> <span>/</span> <span class="text-slate-900 font-medium">🌀 GIF 工具</span> </nav> <!-- Chatless 子导航（md 及以上可见） -->  </div> <!-- 右侧：返回首页按钮 --> <a href="/" class="flex items-center space-x-2 px-3 py-1 rounded-lg bg-slate-200/60 hover:bg-slate-300/60 text-slate-700 hover:text-slate-900 transition-all duration-200 text-sm"> <span>←</span> <span>返回首页</span> </a> </header> <!-- 主内容区域 --> <div class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl space-y-4"> <header class="flex flex-wrap justify-between items-center mb-8 gap-4"> <div> <h1 class="text-3xl md:text-4xl font-black text-sky-600">GIF 编辑器</h1> <p class="text-gray-500 mt-2 max-w-2xl">支持裁剪、缩放、添加文字、水印、反向播放等常用操作；支持导出 GIF 和 WebM 格式；所有处理均在本地浏览器完成，安全且隐私友好。</p> </div> <!-- 右上角替换文件按钮，在处理阶段显示 --> <button id="reset-button" class="hidden text-sm font-medium bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">选择新文件</button> </header> <!-- 上传区域 --> <div id="upload-section"> <div id="drop-zone" class="border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-12 text-center cursor-pointer hover:border-sky-500 hover:bg-sky-50 dark:hover:bg-sky-500/10 transition-colors"> <input type="file" id="gif-input" class="hidden" accept="image/gif"> <label for="gif-input" class="cursor-pointer select-none"> <svg class="mx-auto h-16 w-16 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"> <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </svg> <p class="mt-4 text-lg font-medium text-sky-600">点击或拖拽 GIF 文件到此处</p> <p class="text-sm text-gray-500 mt-1">支持实时预览与压缩</p> </label> </div> </div> <!-- 处理区域 --> <div id="processing-section" class="hidden"> <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8"> <!-- 左侧控制面板 --> <div class="lg:col-span-4 flex flex-col space-y-4"> <!-- 合并的控制面板 --> <div class="gif-card p-4 space-y-4"> <!-- 裁剪设置 --> <section class="space-y-4"> <h3 class="text-lg font-semibold">裁剪区间 (共 <span id="total-frames">0</span> 帧)</h3> <div id="frame-range-slider" class="my-4"></div> <div class="flex justify-between text-sm text-gray-600 dark:text-gray-400"> <span>开始: <span id="start-frame-display" class="font-semibold text-gray-900 dark:text-gray-100">0</span></span> <span>结束: <span id="end-frame-display" class="font-semibold text-gray-900 dark:text-gray-100">0</span></span> </div> </section> <hr class="border-t border-gray-200 dark:border-gray-700"> <!-- 高级选项 --> <section class="space-y-5"> <h3 class="text-lg font-semibold">高级选项</h3> <!-- 尺寸调整 --> <div> <h4 class="text-sm font-medium mb-2">调整尺寸</h4> <div class="flex items-center gap-2"> <input type="number" id="resize-width" placeholder="宽度" class="w-full p-2 swiss-input text-sm"> <span class="text-gray-500">x</span> <input type="number" id="resize-height" placeholder="高度" class="w-full p-2 swiss-input text-sm"> <input type="checkbox" id="aspect-ratio-lock" checked class="h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500"> </div> </div> <!-- 文字添加 --> <div> <h4 class="text-sm font-medium mb-2">添加文字</h4> <input type="text" id="text-input" placeholder="输入文字..." class="w-full p-2 swiss-input text-sm mb-2"> <div class="grid grid-cols-2 gap-2"> <div><label class="text-xs">颜色</label><input type="color" id="text-color" value="#FFFFFF" class="w-full h-9 p-1 border rounded-md"></div> <div><label class="text-xs">大小(px)</label><input type="number" id="font-size" value="32" class="w-full p-2 swiss-input text-sm"></div> </div> </div> <!-- 压缩 --> <div> <h4 class="text-sm font-medium mb-2">压缩等级 (1-200)</h4> <input type="number" id="compression-level" value="80" min="1" max="200" step="10" class="w-full p-2 swiss-input text-sm"> <p class="form-hint mt-1">数字越小压缩力度越大，体积更小但画质下降。推荐 80~120。</p> </div> <!-- 导出格式 --> <div> <h4 class="text-sm font-medium mb-2">导出格式</h4> <select id="output-format" class="w-full p-2 swiss-input text-sm"> <option value="gif">GIF</option> <option value="webm">WebM</option> </select> </div> <!-- 播放 --> <div class="flex items-center pt-2"><input type="checkbox" id="reverse-gif" class="h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500"><label for="reverse-gif" class="ml-2 text-sm">反向播放</label></div> </section> </div> <!-- 操作按钮 --> <div class="space-y-3 pt-2"> <button id="editor-reset-btn" class="w-full py-3 swiss-btn-secondary">重置</button> <button id="clip-button" class="w-full py-3 text-lg swiss-btn">生成</button> </div> </div> <!-- 右侧预览区 --> <div class="lg:col-span-8 space-y-6 flex flex-col"> <!-- 信息栏 --> <div id="gif-info-bar" class="hidden bg-gray-50 dark:bg-black text-xs text-gray-600 dark:text-gray-400 p-2 rounded-t-lg flex flex-wrap items-center justify-between gap-x-4 gap-y-1"> <span id="gif-filename" class="font-semibold truncate"></span> <div>尺寸: <span id="gif-original-dims"></span></div> <div>帧数: <span id="gif-frame-count"></span></div> </div> <div class="gif-card p-5 text-center flex-grow flex flex-col"> <h3 class="text-lg font-semibold mb-4">效果预览</h3> <canvas id="frame-canvas" class="flex-grow max-h-[70vh] mx-auto object-contain rounded"></canvas> <p class="form-hint mt-2">* 为提升性能，预览采用快速渲染模式，偶尔会有噪点；最终导出的 GIF 将使用全精度处理，不会出现这些噪点，请放心。</p> </div> <!-- 原始 GIF 卡片将在 grid 之外呈现 --> </div> </div> <!-- 原始 GIF 卡片移动到第二屏（grid 之后） --> <div class="gif-card p-5 text-center mt-8 max-w-5xl mx-auto"> <h3 class="text-lg font-semibold mb-4">原始 GIF</h3> <img id="original-gif-preview" alt="原始GIF预览" class="max-w-full max-h-[70vh] mx-auto rounded shadow-md"> </div> </div> <!-- 结果区域 --> <div id="result-section" class="hidden space-y-6 text-center"> <h2 class="text-2xl font-bold text-green-600">🎉 处理完成！</h2> <div class="flex justify-center bg-gray-50 dark:bg-gray-800 p-6 rounded-lg"> <img id="result-gif" alt="结果 GIF" class="max-w-full max-h-96 rounded-lg shadow-lg border-4 border-green-200"> <video id="result-video" class="hidden max-w-full max-h-96 rounded-lg shadow-lg border-4 border-green-200" controls loop></video> </div> <p id="output-info" class="text-sm text-gray-600 mt-4 mb-2"></p> <a id="download-link" class="inline-block swiss-btn bg-green-600 hover:bg-green-700 px-8 py-3 text-lg shadow-md">下载文件</a> <button id="back-to-start-button" class="swiss-btn-secondary px-8 py-3 ml-4 shadow">处理新文件</button> </div> </div> <!-- 加载蒙版 --> <div id="loading-overlay" class="hidden fixed inset-0 bg-black/40 backdrop-blur-sm flex flex-col items-center justify-center z-50"> <div class="loader ease-linear rounded-full border-6 border-t-6 border-gray-200 mb-4"></div> <p id="loading-text" class="text-white text-lg font-semibold"></p> <p id="loading-subtext" class="text-gray-200 text-sm mt-1"></p> </div> <script type="module" src="/_astro/giftools.astro_astro_type_script_index_0_lang.DpOktdXh.js"></script> <footer class="footer-pocket" aria-label="Site copyright" data-astro-cid-w3csb3e3> <small data-astro-cid-w3csb3e3>© 2025 kamjin3086. All rights reserved.</small>  </footer> </body>