import{_ as zt}from"./preload-helper.BlTxHScW.js";var Se={},ct={},we={},gt;function It(){if(gt)return we;gt=1,Object.defineProperty(we,"__esModule",{value:!0}),we.loop=we.conditional=we.parse=void 0;var t=function s(o,h){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:v;if(Array.isArray(h))h.forEach(function(S){return s(o,S,v,w)});else if(typeof h=="function")h(o,v,w,s);else{var x=Object.keys(h)[0];Array.isArray(h[x])?(w[x]={},s(o,h[x],v,w[x])):w[x]=h[x](o,v,w,s)}return v};we.parse=t;var e=function(o,h){return function(v,w,x,S){h(v,w,x)&&S(v,o,w,x)}};we.conditional=e;var n=function(o,h){return function(v,w,x,S){for(var E=[],c=v.pos;h(v,w,x);){var d={};if(S(v,o,w,d),v.pos===c)break;c=v.pos,E.push(d)}return E}};return we.loop=n,we}var V={},mt;function kt(){if(mt)return V;mt=1,Object.defineProperty(V,"__esModule",{value:!0}),V.readBits=V.readArray=V.readUnsigned=V.readString=V.peekBytes=V.readBytes=V.peekByte=V.readByte=V.buildStream=void 0;var t=function(c){return{data:c,pos:0}};V.buildStream=t;var e=function(){return function(c){return c.data[c.pos++]}};V.readByte=e;var n=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(d){return d.data[d.pos+c]}};V.peekByte=n;var s=function(c){return function(d){return d.data.subarray(d.pos,d.pos+=c)}};V.readBytes=s;var o=function(c){return function(d){return d.data.subarray(d.pos,d.pos+c)}};V.peekBytes=o;var h=function(c){return function(d){return Array.from(s(c)(d)).map(function(p){return String.fromCharCode(p)}).join("")}};V.readString=h;var v=function(c){return function(d){var p=s(2)(d);return c?(p[1]<<8)+p[0]:(p[0]<<8)+p[1]}};V.readUnsigned=v;var w=function(c,d){return function(p,b,g){for(var L=typeof d=="function"?d(p,b,g):d,R=s(c),k=new Array(L),z=0;z<L;z++)k[z]=R(p);return k}};V.readArray=w;var x=function(c,d,p){for(var b=0,g=0;g<p;g++)b+=c[d+g]&&Math.pow(2,p-g-1);return b},S=function(c){return function(d){for(var p=e()(d),b=new Array(8),g=0;g<8;g++)b[7-g]=!!(p&1<<g);return Object.keys(c).reduce(function(L,R){var k=c[R];return k.length?L[R]=x(b,k.index,k.length):L[R]=b[k.index],L},{})}};return V.readBits=S,V}var Et;function Nt(){return Et||(Et=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=It(),n=kt(),s={blocks:function(d){for(var p=0,b=[],g=d.data.length,L=0,R=(0,n.readByte)()(d);R!==p&&R;R=(0,n.readByte)()(d)){if(d.pos+R>=g){var k=g-d.pos;b.push((0,n.readBytes)(k)(d)),L+=k;break}b.push((0,n.readBytes)(R)(d)),L+=R}for(var z=new Uint8Array(L),j=0,T=0;T<b.length;T++)z.set(b[T],j),j+=b[T].length;return z}},o=(0,e.conditional)({gce:[{codes:(0,n.readBytes)(2)},{byteSize:(0,n.readByte)()},{extras:(0,n.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,n.readUnsigned)(!0)},{transparentColorIndex:(0,n.readByte)()},{terminator:(0,n.readByte)()}]},function(c){var d=(0,n.peekBytes)(2)(c);return d[0]===33&&d[1]===249}),h=(0,e.conditional)({image:[{code:(0,n.readByte)()},{descriptor:[{left:(0,n.readUnsigned)(!0)},{top:(0,n.readUnsigned)(!0)},{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{lct:(0,n.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,e.conditional)({lct:(0,n.readArray)(3,function(c,d,p){return Math.pow(2,p.descriptor.lct.size+1)})},function(c,d,p){return p.descriptor.lct.exists}),{data:[{minCodeSize:(0,n.readByte)()},s]}]},function(c){return(0,n.peekByte)()(c)===44}),v=(0,e.conditional)({text:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{preData:function(d,p,b){return(0,n.readBytes)(b.text.blockSize)(d)}},s]},function(c){var d=(0,n.peekBytes)(2)(c);return d[0]===33&&d[1]===1}),w=(0,e.conditional)({application:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{id:function(d,p,b){return(0,n.readString)(b.blockSize)(d)}},s]},function(c){var d=(0,n.peekBytes)(2)(c);return d[0]===33&&d[1]===255}),x=(0,e.conditional)({comment:[{codes:(0,n.readBytes)(2)},s]},function(c){var d=(0,n.peekBytes)(2)(c);return d[0]===33&&d[1]===254}),S=[{header:[{signature:(0,n.readString)(3)},{version:(0,n.readString)(3)}]},{lsd:[{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{gct:(0,n.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,n.readByte)()},{pixelAspectRatio:(0,n.readByte)()}]},(0,e.conditional)({gct:(0,n.readArray)(3,function(c,d){return Math.pow(2,d.lsd.gct.size+1)})},function(c,d){return d.lsd.gct.exists}),{frames:(0,e.loop)([o,w,x,h,v],function(c){var d=(0,n.peekByte)()(c);return d===33||d===44})}],E=S;t.default=E})(ct)),ct}var je={},St;function $t(){if(St)return je;St=1,Object.defineProperty(je,"__esModule",{value:!0}),je.deinterlace=void 0;var t=function(n,s){for(var o=new Array(n.length),h=n.length/s,v=function(p,b){var g=n.slice(b*s,(b+1)*s);o.splice.apply(o,[p*s,s].concat(g))},w=[0,4,2,1],x=[8,8,4,2],S=0,E=0;E<4;E++)for(var c=w[E];c<h;c+=x[E])v(c,S),S++;return o};return je.deinterlace=t,je}var He={},wt;function jt(){if(wt)return He;wt=1,Object.defineProperty(He,"__esModule",{value:!0}),He.lzw=void 0;var t=function(n,s,o){var h=4096,v=-1,w=o,x,S,E,c,d,p,b,te,g,L,ee,R,B,W,se,ce,k=new Array(o),z=new Array(h),j=new Array(h),T=new Array(h+1);for(R=n,S=1<<R,d=S+1,x=S+2,b=v,c=R+1,E=(1<<c)-1,g=0;g<S;g++)z[g]=0,j[g]=g;var ee,te,B,W,ce,se;for(ee=te=B=W=ce=se=0,L=0;L<w;){if(W===0){if(te<c){ee+=s[se]<<te,te+=8,se++;continue}if(g=ee&E,ee>>=c,te-=c,g>x||g==d)break;if(g==S){c=R+1,E=(1<<c)-1,x=S+2,b=v;continue}if(b==v){T[W++]=j[g],b=g,B=g;continue}for(p=g,g==x&&(T[W++]=B,g=b);g>S;)T[W++]=j[g],g=z[g];B=j[g]&255,T[W++]=B,x<h&&(z[x]=b,j[x]=B,x++,(x&E)===0&&x<h&&(c++,E+=x)),b=p}W--,k[ce++]=T[W],L++}for(L=ce;L<w;L++)k[L]=0;return k};return He.lzw=t,He}var xt;function Ht(){if(xt)return Se;xt=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.decompressFrames=Se.decompressFrame=Se.parseGIF=void 0;var t=h(Nt()),e=It(),n=kt(),s=$t(),o=jt();function h(E){return E&&E.__esModule?E:{default:E}}var v=function(c){var d=new Uint8Array(c);return(0,e.parse)((0,n.buildStream)(d),t.default)};Se.parseGIF=v;var w=function(c){for(var d=c.pixels.length,p=new Uint8ClampedArray(d*4),b=0;b<d;b++){var g=b*4,L=c.pixels[b],R=c.colorTable[L]||[0,0,0];p[g]=R[0],p[g+1]=R[1],p[g+2]=R[2],p[g+3]=L!==c.transparentIndex?255:0}return p},x=function(c,d,p){if(!c.image){console.warn("gif frame does not have associated image.");return}var b=c.image,g=b.descriptor.width*b.descriptor.height,L=(0,o.lzw)(b.data.minCodeSize,b.data.blocks,g);b.descriptor.lct.interlaced&&(L=(0,s.deinterlace)(L,b.descriptor.width));var R={pixels:L,dims:{top:c.image.descriptor.top,left:c.image.descriptor.left,width:c.image.descriptor.width,height:c.image.descriptor.height}};return b.descriptor.lct&&b.descriptor.lct.exists?R.colorTable=b.lct:R.colorTable=d,c.gce&&(R.delay=(c.gce.delay||10)*10,R.disposalType=c.gce.extras.disposal,c.gce.extras.transparentColorGiven&&(R.transparentIndex=c.gce.transparentColorIndex)),p&&(R.patch=w(R)),R};Se.decompressFrame=x;var S=function(c,d){return c.frames.filter(function(p){return p.image}).map(function(p){return x(p,c.gct,d)})};return Se.decompressFrames=S,Se}var bt=Ht(),I;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(I||(I={}));const Tt=(()=>{let t=0;return()=>t++})(),Gt=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Wt=new Error("called FFmpeg.terminate()");class qt{#t=null;#n={};#r={};#i=[];#a=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:e,type:n,data:s}})=>{switch(n){case I.LOAD:this.loaded=!0,this.#n[e](s);break;case I.MOUNT:case I.UNMOUNT:case I.EXEC:case I.FFPROBE:case I.WRITE_FILE:case I.READ_FILE:case I.DELETE_FILE:case I.RENAME:case I.CREATE_DIR:case I.LIST_DIR:case I.DELETE_DIR:this.#n[e](s);break;case I.LOG:this.#i.forEach(o=>o(s));break;case I.PROGRESS:this.#a.forEach(o=>o(s));break;case I.ERROR:this.#r[e](s);break}delete this.#n[e],delete this.#r[e]})};#e=({type:e,data:n},s=[],o)=>this.#t?new Promise((h,v)=>{const w=Tt();this.#t&&this.#t.postMessage({id:w,type:e,data:n},s),this.#n[w]=h,this.#r[w]=v,o?.addEventListener("abort",()=>{v(new DOMException(`Message # ${w} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(Gt);on(e,n){e==="log"?this.#i.push(n):e==="progress"&&this.#a.push(n)}off(e,n){e==="log"?this.#i=this.#i.filter(s=>s!==n):e==="progress"&&(this.#a=this.#a.filter(s=>s!==n))}load=({classWorkerURL:e,...n}={},{signal:s}={})=>(this.#t||(this.#t=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/_astro/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:I.LOAD,data:n},void 0,s));exec=(e,n=-1,{signal:s}={})=>this.#e({type:I.EXEC,data:{args:e,timeout:n}},void 0,s);ffprobe=(e,n=-1,{signal:s}={})=>this.#e({type:I.FFPROBE,data:{args:e,timeout:n}},void 0,s);terminate=()=>{const e=Object.keys(this.#r);for(const n of e)this.#r[n](Wt),delete this.#r[n],delete this.#n[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(e,n,{signal:s}={})=>{const o=[];return n instanceof Uint8Array&&o.push(n.buffer),this.#e({type:I.WRITE_FILE,data:{path:e,data:n}},o,s)};mount=(e,n,s)=>{const o=[];return this.#e({type:I.MOUNT,data:{fsType:e,options:n,mountPoint:s}},o)};unmount=e=>{const n=[];return this.#e({type:I.UNMOUNT,data:{mountPoint:e}},n)};readFile=(e,n="binary",{signal:s}={})=>this.#e({type:I.READ_FILE,data:{path:e,encoding:n}},void 0,s);deleteFile=(e,{signal:n}={})=>this.#e({type:I.DELETE_FILE,data:{path:e}},void 0,n);rename=(e,n,{signal:s}={})=>this.#e({type:I.RENAME,data:{oldPath:e,newPath:n}},void 0,s);createDir=(e,{signal:n}={})=>this.#e({type:I.CREATE_DIR,data:{path:e}},void 0,n);listDir=(e,{signal:n}={})=>this.#e({type:I.LIST_DIR,data:{path:e}},void 0,n);deleteDir=(e,{signal:n}={})=>this.#e({type:I.DELETE_DIR,data:{path:e}},void 0,n)}var yt;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(yt||(yt={}));const Xt=new Error("failed to get response body reader"),Kt=new Error("failed to complete download"),Yt="Content-Length",Zt=t=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const{result:o}=s;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},s.onerror=o=>{n(Error(`File could not be read! Code=${o?.target?.error?.code||-1}`))},s.readAsArrayBuffer(t)}),Ct=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await Zt(t);else return new Uint8Array;return new Uint8Array(e)},Jt=async(t,e)=>{const n=await fetch(t);let s;try{const o=parseInt(n.headers.get(Yt)||"-1"),h=n.body?.getReader();if(!h)throw Xt;const v=[];let w=0;for(;;){const{done:E,value:c}=await h.read(),d=c?c.length:0;if(E){if(o!=-1&&o!==w)throw Kt;e&&e({url:t,total:o,received:w,delta:d,done:E});break}v.push(c),w+=d,e&&e({url:t,total:o,received:w,delta:d,done:E})}const x=new Uint8Array(w);let S=0;for(const E of v)x.set(E,S),S+=E.length;s=x.buffer}catch(o){console.log("failed to send download progress event: ",o),s=await n.arrayBuffer()}return s},At=async(t,e,n=!1,s)=>{const o=n?await Jt(t,s):await(await fetch(t)).arrayBuffer(),h=new Blob([o],{type:e});return URL.createObjectURL(h)};var Ae;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(Ae||(Ae={}));var Q;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(Q||(Q={}));function Qt(t){return Ze(t)&&typeof t.from=="function"}function Ze(t){return typeof t=="object"&&typeof t.to=="function"}function Lt(t){t.parentElement.removeChild(t)}function ut(t){return t!=null}function Dt(t){t.preventDefault()}function er(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function tr(t,e){return Math.round(t/e)*e}function rr(t,e){var n=t.getBoundingClientRect(),s=t.ownerDocument,o=s.documentElement,h=Pt(s);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(h.x=0),e?n.top+h.y-o.clientTop:n.left+h.x-o.clientLeft}function le(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function Rt(t,e,n){n>0&&(Z(t,e),setTimeout(function(){Ye(t,e)},n))}function Bt(t){return Math.max(Math.min(t,100),0)}function Je(t){return Array.isArray(t)?t:[t]}function nr(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function Z(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function Ye(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function ir(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function Pt(t){var e=window.pageXOffset!==void 0,n=(t.compatMode||"")==="CSS1Compat",s=e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,o=e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop;return{x:s,y:o}}function ar(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function sr(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function or(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function dt(t,e){return 100/(e-t)}function ft(t,e,n){return e*100/(t[n+1]-t[n])}function lr(t,e){return ft(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function cr(t,e){return e*(t[1]-t[0])/100+t[0]}function Te(t,e){for(var n=1;t>=e[n];)n+=1;return n}function ur(t,e,n){if(n>=t.slice(-1)[0])return 100;var s=Te(n,t),o=t[s-1],h=t[s],v=e[s-1],w=e[s];return v+lr([o,h],n)/dt(v,w)}function fr(t,e,n){if(n>=100)return t.slice(-1)[0];var s=Te(n,e),o=t[s-1],h=t[s],v=e[s-1],w=e[s];return cr([o,h],(n-v)*dt(v,w))}function dr(t,e,n,s){if(s===100)return s;var o=Te(s,t),h=t[o-1],v=t[o];return n?s-h>(v-h)/2?v:h:e[o-1]?t[o-1]+tr(s-t[o-1],e[o-1]):s}var Ot=(function(){function t(e,n,s){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[s||!1],this.xNumSteps=[!1],this.snap=n;var o,h=[];for(Object.keys(e).forEach(function(v){h.push([Je(e[v]),v])}),h.sort(function(v,w){return v[0][0]-w[0][0]}),o=0;o<h.length;o++)this.handleEntryPoint(h[o][1],h[o][0]);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)this.handleStepPoint(o,this.xNumSteps[o])}return t.prototype.getDistance=function(e){for(var n=[],s=0;s<this.xNumSteps.length-1;s++)n[s]=ft(this.xVal,e,s);return n},t.prototype.getAbsoluteDistance=function(e,n,s){var o=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[o+1];)o++;else e===this.xPct[this.xPct.length-1]&&(o=this.xPct.length-2);!s&&e===this.xPct[o+1]&&o++,n===null&&(n=[]);var h,v=1,w=n[o],x=0,S=0,E=0,c=0;for(s?h=(e-this.xPct[o])/(this.xPct[o+1]-this.xPct[o]):h=(this.xPct[o+1]-e)/(this.xPct[o+1]-this.xPct[o]);w>0;)x=this.xPct[o+1+c]-this.xPct[o+c],n[o+c]*v+100-h*100>100?(S=x*h,v=(w-100*h)/n[o+c],h=1):(S=n[o+c]*x/100*v,v=0),s?(E=E-S,this.xPct.length+c>=1&&c--):(E=E+S,this.xPct.length-c>=1&&c++),w=n[o+c]*v;return e+E},t.prototype.toStepping=function(e){return e=ur(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return fr(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=dr(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,n,s){var o=Te(e,this.xPct);return(e===100||n&&e===this.xPct[o-1])&&(o=Math.max(o-1,1)),(this.xVal[o]-this.xVal[o-1])/s},t.prototype.getNearbySteps=function(e){var n=Te(e,this.xPct);return{stepBefore:{startValue:this.xVal[n-2],step:this.xNumSteps[n-2],highestStep:this.xHighestCompleteStep[n-2]},thisStep:{startValue:this.xVal[n-1],step:this.xNumSteps[n-1],highestStep:this.xHighestCompleteStep[n-1]},stepAfter:{startValue:this.xVal[n],step:this.xNumSteps[n],highestStep:this.xHighestCompleteStep[n]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(nr);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,n){var s;if(e==="min"?s=0:e==="max"?s=100:s=parseFloat(e),!le(s)||!le(n[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(s),this.xVal.push(n[0]);var o=Number(n[1]);s?this.xSteps.push(isNaN(o)?!1:o):isNaN(o)||(this.xSteps[0]=o),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,n){if(n){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=ft([this.xVal[e],this.xVal[e+1]],n,0)/dt(this.xPct[e],this.xPct[e+1]);var s=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],o=Math.ceil(Number(s.toFixed(3))-1),h=this.xVal[e]+this.xNumSteps[e]*o;this.xHighestCompleteStep[e]=h}},t})(),_t={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},Ut={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Ce={tooltips:".__tooltips",aria:".__aria"};function hr(t,e){if(!le(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function pr(t,e){if(!le(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function vr(t,e){if(!le(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function gr(t,e){if(!le(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function mr(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new Ot(e,t.snap||!1,t.singleStep)}function Er(t,e){if(e=Je(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Sr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function wr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function xr(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Ft(t,e){var n=[!1],s;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(s=1;s<t.handles;s++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=e}t.connect=n}function br(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Mt(t,e){if(!le(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function yr(t,e){if(!le(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Cr(t,e){var n;if(!le(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||le(e[0])||le(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var s=e[0]+e[1],o=t.spectrum.xVal[0],h=t.spectrum.xVal[t.spectrum.xVal.length-1];if(s/(h-o)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Ar(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Lr(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,s=e.indexOf("drag")>=0,o=e.indexOf("fixed")>=0,h=e.indexOf("snap")>=0,v=e.indexOf("hover")>=0,w=e.indexOf("unconstrained")>=0,x=e.indexOf("invert-connects")>=0,S=e.indexOf("drag-all")>=0,E=e.indexOf("smooth-steps")>=0;if(o){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Mt(t,t.start[1]-t.start[0])}if(x&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(w&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||h,drag:s,dragAll:S,smoothSteps:E,fixed:o,snap:h,hover:v,unconstrained:w,invertConnects:x}}function Dr(t,e){if(e!==!1)if(e===!0||Ze(e)){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(e)}else{if(e=Je(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(s){if(typeof s!="boolean"&&!Ze(s))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function Rr(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function Br(t,e){if(!Ze(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function _r(t,e){if(!Qt(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Ir(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function kr(t,e){t.documentElement=e}function Pr(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Or(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(n){t.cssClasses[n]=t.cssPrefix+e[n]})):t.cssClasses=e}function Vt(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:_t,format:_t},n={step:{r:!1,t:hr},keyboardPageMultiplier:{r:!1,t:pr},keyboardMultiplier:{r:!1,t:vr},keyboardDefaultStep:{r:!1,t:gr},start:{r:!0,t:Er},connect:{r:!0,t:Ft},direction:{r:!0,t:Ar},snap:{r:!1,t:Sr},animate:{r:!1,t:wr},animationDuration:{r:!1,t:xr},range:{r:!0,t:mr},orientation:{r:!1,t:br},margin:{r:!1,t:Mt},limit:{r:!1,t:yr},padding:{r:!1,t:Cr},behaviour:{r:!0,t:Lr},ariaFormat:{r:!1,t:Br},format:{r:!1,t:_r},tooltips:{r:!1,t:Dr},keyboardSupport:{r:!0,t:Ir},documentElement:{r:!1,t:kr},cssPrefix:{r:!0,t:Pr},cssClasses:{r:!0,t:Or},handleAttributes:{r:!1,t:Rr}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Ut,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach(function(x){if(!ut(t[x])&&s[x]===void 0){if(n[x].r)throw new Error("noUiSlider: '"+x+"' is required.");return}n[x].t(e,ut(t[x])?t[x]:s[x])}),e.pips=t.pips;var o=document.createElement("div"),h=o.style.msTransform!==void 0,v=o.style.transform!==void 0;e.transformRule=v?"transform":h?"msTransform":"webkitTransform";var w=[["left","top"],["right","bottom"]];return e.style=w[e.dir][e.ort],e}function Ur(t,e,n){var s=ar(),o=or(),h=o&&sr(),v=t,w,x,S,E,c,d,p=e.spectrum,b=[],g=[],L=[],R=0,k={},z=!1,j=t.ownerDocument,T=e.documentElement||j.documentElement,ee=j.body,te=j.dir==="rtl"||e.ort===1?0:100;function B(r,i){var a=j.createElement("div");return i&&Z(a,i),r.appendChild(a),a}function W(r,i){var a=B(r,e.cssClasses.origin),l=B(a,e.cssClasses.handle);if(B(l,e.cssClasses.touchArea),l.setAttribute("data-handle",String(i)),e.keyboardSupport&&(l.setAttribute("tabindex","0"),l.addEventListener("keydown",function(f){return tt(f,i)})),e.handleAttributes!==void 0){var u=e.handleAttributes[i];Object.keys(u).forEach(function(f){l.setAttribute(f,u[f])})}return l.setAttribute("role","slider"),l.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),i===0?Z(l,e.cssClasses.handleLower):i===e.handles-1&&Z(l,e.cssClasses.handleUpper),a.handle=l,a}function ce(r,i){return i?B(r,e.cssClasses.connect):!1}function se(r,i){x=B(i,e.cssClasses.connects),S=[],E=[],E.push(ce(x,r[0]));for(var a=0;a<e.handles;a++)S.push(W(i,a)),L[a]=a,E.push(ce(x,r[a+1]))}function Ge(r){Z(r,e.cssClasses.target),e.dir===0?Z(r,e.cssClasses.ltr):Z(r,e.cssClasses.rtl),e.ort===0?Z(r,e.cssClasses.horizontal):Z(r,e.cssClasses.vertical);var i=getComputedStyle(r).direction;return i==="rtl"?Z(r,e.cssClasses.textDirectionRtl):Z(r,e.cssClasses.textDirectionLtr),B(r,e.cssClasses.base)}function We(r,i){return!e.tooltips||!e.tooltips[i]?!1:B(r.firstChild,e.cssClasses.tooltip)}function ue(){return v.hasAttribute("disabled")}function Le(r){var i=S[r];return i.hasAttribute("disabled")}function re(r){r!=null?(S[r].setAttribute("disabled",""),S[r].handle.removeAttribute("tabindex")):(v.setAttribute("disabled",""),S.forEach(function(i){i.handle.removeAttribute("tabindex")}))}function J(r){r!=null?(S[r].removeAttribute("disabled"),S[r].handle.setAttribute("tabindex","0")):(v.removeAttribute("disabled"),S.forEach(function(i){i.removeAttribute("disabled"),i.handle.setAttribute("tabindex","0")}))}function q(){d&&(A("update"+Ce.tooltips),d.forEach(function(r){r&&Lt(r)}),d=null)}function Be(){q(),d=S.map(We),ge("update"+Ce.tooltips,function(r,i,a){if(!(!d||!e.tooltips)&&d[i]!==!1){var l=r[i];e.tooltips[i]!==!0&&(l=e.tooltips[i].to(a[i])),d[i].innerHTML=l}})}function de(){A("update"+Ce.aria),ge("update"+Ce.aria,function(r,i,a,l,u){L.forEach(function(f){var y=S[f],m=D(g,f,0,!0,!0,!0),P=D(g,f,100,!0,!0,!0),O=u[f],F=String(e.ariaFormat.to(a[f]));m=p.fromStepping(m).toFixed(1),P=p.fromStepping(P).toFixed(1),O=p.fromStepping(O).toFixed(1),y.children[0].setAttribute("aria-valuemin",m),y.children[0].setAttribute("aria-valuemax",P),y.children[0].setAttribute("aria-valuenow",O),y.children[0].setAttribute("aria-valuetext",F)})})}function qe(r){if(r.mode===Ae.Range||r.mode===Ae.Steps)return p.xVal;if(r.mode===Ae.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var i=r.values-1,a=100/i,l=[];i--;)l[i]=i*a;return l.push(100),he(l,r.stepped)}return r.mode===Ae.Positions?he(r.values,r.stepped):r.mode===Ae.Values?r.stepped?r.values.map(function(u){return p.fromStepping(p.getStep(p.toStepping(u)))}):r.values:[]}function he(r,i){return r.map(function(a){return p.fromStepping(i?p.getStep(a):a)})}function xe(r){function i(O,F){return Number((O+F).toFixed(7))}var a=qe(r),l={},u=p.xVal[0],f=p.xVal[p.xVal.length-1],y=!1,m=!1,P=0;return a=er(a.slice().sort(function(O,F){return O-F})),a[0]!==u&&(a.unshift(u),y=!0),a[a.length-1]!==f&&(a.push(f),m=!0),a.forEach(function(O,F){var M,_,$,Y=O,G=a[F+1],X,at,st,ot,ht,lt,pt,vt=r.mode===Ae.Steps;for(vt&&(M=p.xNumSteps[F]),M||(M=G-Y),G===void 0&&(G=Y),M=Math.max(M,1e-7),_=Y;_<=G;_=i(_,M)){for(X=p.toStepping(_),at=X-P,ht=at/(r.density||1),lt=Math.round(ht),pt=at/lt,$=1;$<=lt;$+=1)st=P+$*pt,l[st.toFixed(5)]=[p.fromStepping(st),0];ot=a.indexOf(_)>-1?Q.LargeValue:vt?Q.SmallValue:Q.NoValue,!F&&y&&_!==G&&(ot=0),_===G&&m||(l[X.toFixed(5)]=[_,ot]),P=X}}),l}function Ue(r,i,a){var l,u,f=j.createElement("div"),y=(l={},l[Q.None]="",l[Q.NoValue]=e.cssClasses.valueNormal,l[Q.LargeValue]=e.cssClasses.valueLarge,l[Q.SmallValue]=e.cssClasses.valueSub,l),m=(u={},u[Q.None]="",u[Q.NoValue]=e.cssClasses.markerNormal,u[Q.LargeValue]=e.cssClasses.markerLarge,u[Q.SmallValue]=e.cssClasses.markerSub,u),P=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],O=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];Z(f,e.cssClasses.pips),Z(f,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function F(_,$){var Y=$===e.cssClasses.value,G=Y?P:O,X=Y?y:m;return $+" "+G[e.ort]+" "+X[_]}function M(_,$,Y){if(Y=i?i($,Y):Y,Y!==Q.None){var G=B(f,!1);G.className=F(Y,e.cssClasses.marker),G.style[e.style]=_+"%",Y>Q.NoValue&&(G=B(f,!1),G.className=F(Y,e.cssClasses.value),G.setAttribute("data-value",String($)),G.style[e.style]=_+"%",G.innerHTML=String(a.to($)))}}return Object.keys(r).forEach(function(_){M(_,r[_][0],r[_][1])}),f}function Fe(){c&&(Lt(c),c=null)}function ne(r){Fe();var i=xe(r),a=r.filter,l=r.format||{to:function(u){return String(Math.round(u))}};return c=v.appendChild(Ue(i,a,l)),c}function Me(){var r=w.getBoundingClientRect(),i="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||w[i]:r.height||w[i]}function pe(r,i,a,l){var u=function(y){var m=Ve(y,l.pageOffset,l.target||i);if(!m||ue()&&!l.doNotReject||ir(v,e.cssClasses.tap)&&!l.doNotReject||r===s.start&&m.buttons!==void 0&&m.buttons>1||l.hover&&m.buttons)return!1;h||m.preventDefault(),m.calcPoint=m.points[e.ort],a(m,l)},f=[];return r.split(" ").forEach(function(y){i.addEventListener(y,u,h?{passive:!0}:!1),f.push([y,u])}),f}function Ve(r,i,a){var l=r.type.indexOf("touch")===0,u=r.type.indexOf("mouse")===0,f=r.type.indexOf("pointer")===0,y=0,m=0;if(r.type.indexOf("MSPointer")===0&&(f=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(l){var P=function(M){var _=M.target;return _===a||a.contains(_)||r.composed&&r.composedPath().shift()===a};if(r.type==="touchstart"){var O=Array.prototype.filter.call(r.touches,P);if(O.length>1)return!1;y=O[0].pageX,m=O[0].pageY}else{var F=Array.prototype.find.call(r.changedTouches,P);if(!F)return!1;y=F.pageX,m=F.pageY}}return i=i||Pt(j),(u||f)&&(y=r.clientX+i.x,m=r.clientY+i.y),r.pageOffset=i,r.points=[y,m],r.cursor=u||f,r}function ze(r){var i=r-rr(w,e.ort),a=i*100/Me();return a=Bt(a),e.dir?100-a:a}function Qe(r){var i=100,a=!1;return S.forEach(function(l,u){if(!Le(u)){var f=g[u],y=Math.abs(f-r),m=y===100&&i===100,P=y<i,O=y<=i&&r>f;(P||O||m)&&(a=u,i=y)}}),a}function ie(r,i){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Ne(r,i)}function ve(r,i){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&i.buttonsProperty!==0)return Ne(r,i);var a=(e.dir?-1:1)*(r.calcPoint-i.startCalcPoint),l=a*100/i.baseSize;K(a>0,l,i.locations,i.handleNumbers,i.connect)}function Ne(r,i){i.handle&&(Ye(i.handle,e.cssClasses.active),R-=1),i.listeners.forEach(function(a){T.removeEventListener(a[0],a[1])}),R===0&&(Ye(v,e.cssClasses.drag),fe(),r.cursor&&(ee.style.cursor="",ee.removeEventListener("selectstart",Dt))),e.events.smoothSteps&&(i.handleNumbers.forEach(function(a){oe(a,g[a],!0,!0,!1,!1)}),i.handleNumbers.forEach(function(a){C("update",a)})),i.handleNumbers.forEach(function(a){C("change",a),C("set",a),C("end",a)})}function _e(r,i){if(!i.handleNumbers.some(Le)){var a;if(i.handleNumbers.length===1){var l=S[i.handleNumbers[0]];a=l.children[0],R+=1,Z(a,e.cssClasses.active)}r.stopPropagation();var u=[],f=pe(s.move,T,ve,{target:r.target,handle:a,connect:i.connect,listeners:u,startCalcPoint:r.calcPoint,baseSize:Me(),pageOffset:r.pageOffset,handleNumbers:i.handleNumbers,buttonsProperty:r.buttons,locations:g.slice()}),y=pe(s.end,T,Ne,{target:r.target,handle:a,listeners:u,doNotReject:!0,handleNumbers:i.handleNumbers}),m=pe("mouseout",T,ie,{target:r.target,handle:a,listeners:u,doNotReject:!0,handleNumbers:i.handleNumbers});u.push.apply(u,f.concat(y,m)),r.cursor&&(ee.style.cursor=getComputedStyle(r.target).cursor,S.length>1&&Z(v,e.cssClasses.drag),ee.addEventListener("selectstart",Dt,!1)),i.handleNumbers.forEach(function(P){C("start",P)})}}function De(r){r.stopPropagation();var i=ze(r.calcPoint),a=Qe(i);a!==!1&&(e.events.snap||Rt(v,e.cssClasses.tap,e.animationDuration),oe(a,i,!0,!0),fe(),C("slide",a,!0),C("update",a,!0),e.events.snap?_e(r,{handleNumbers:[a]}):(C("change",a,!0),C("set",a,!0)))}function et(r){var i=ze(r.calcPoint),a=p.getStep(i),l=p.fromStepping(a);Object.keys(k).forEach(function(u){u.split(".")[0]==="hover"&&k[u].forEach(function(f){f.call(Oe,l)})})}function tt(r,i){if(ue()||Le(i))return!1;var a=["Left","Right"],l=["Down","Up"],u=["PageDown","PageUp"],f=["Home","End"];e.dir&&!e.ort?a.reverse():e.ort&&!e.dir&&(l.reverse(),u.reverse());var y=r.key.replace("Arrow",""),m=y===u[0],P=y===u[1],O=y===l[0]||y===a[0]||m,F=y===l[1]||y===a[1]||P,M=y===f[0],_=y===f[1];if(!O&&!F&&!M&&!_)return!0;r.preventDefault();var $;if(F||O){var Y=O?0:1,G=Ke(i),X=G[Y];if(X===null)return!1;X===!1&&(X=p.getDefaultStep(g[i],O,e.keyboardDefaultStep)),P||m?X*=e.keyboardPageMultiplier:X*=e.keyboardMultiplier,X=Math.max(X,1e-7),X=(O?-1:1)*X,$=b[i]+X}else _?$=e.spectrum.xVal[e.spectrum.xVal.length-1]:$=e.spectrum.xVal[0];return oe(i,p.toStepping($),!0,!0),C("slide",i),C("update",i),C("change",i),C("set",i),!1}function Ie(r){r.fixed||S.forEach(function(i,a){pe(s.start,i.children[0],_e,{handleNumbers:[a]})}),r.tap&&pe(s.start,w,De,{}),r.hover&&pe(s.move,w,et,{hover:!0}),r.drag&&E.forEach(function(i,a){if(!(i===!1||a===0||a===E.length-1)){var l=S[a-1],u=S[a],f=[i],y=[l,u],m=[a-1,a];Z(i,e.cssClasses.draggable),r.fixed&&(f.push(l.children[0]),f.push(u.children[0])),r.dragAll&&(y=S,m=L),f.forEach(function(P){pe(s.start,P,_e,{handles:y,handleNumbers:m,connect:i})})}})}function ge(r,i){k[r]=k[r]||[],k[r].push(i),r.split(".")[0]==="update"&&S.forEach(function(a,l){C("update",l)})}function ke(r){return r===Ce.aria||r===Ce.tooltips}function A(r){var i=r&&r.split(".")[0],a=i?r.substring(i.length):r;Object.keys(k).forEach(function(l){var u=l.split(".")[0],f=l.substring(u.length);(!i||i===u)&&(!a||a===f)&&(!ke(f)||a===f)&&delete k[l]})}function C(r,i,a){Object.keys(k).forEach(function(l){var u=l.split(".")[0];r===u&&k[l].forEach(function(f){f.call(Oe,b.map(e.format.to),i,b.slice(),a||!1,g.slice(),Oe)})})}function D(r,i,a,l,u,f,y){var m;return S.length>1&&!e.events.unconstrained&&(l&&i>0&&(m=p.getAbsoluteDistance(r[i-1],e.margin,!1),a=Math.max(a,m)),u&&i<S.length-1&&(m=p.getAbsoluteDistance(r[i+1],e.margin,!0),a=Math.min(a,m))),S.length>1&&e.limit&&(l&&i>0&&(m=p.getAbsoluteDistance(r[i-1],e.limit,!1),a=Math.min(a,m)),u&&i<S.length-1&&(m=p.getAbsoluteDistance(r[i+1],e.limit,!0),a=Math.max(a,m))),e.padding&&(i===0&&(m=p.getAbsoluteDistance(0,e.padding[0],!1),a=Math.max(a,m)),i===S.length-1&&(m=p.getAbsoluteDistance(100,e.padding[1],!0),a=Math.min(a,m))),y||(a=p.getStep(a)),a=Bt(a),a===r[i]&&!f?!1:a}function U(r,i){var a=e.ort;return(a?i:r)+", "+(a?r:i)}function K(r,i,a,l,u){var f=a.slice(),y=l[0],m=e.events.smoothSteps,P=[!r,r],O=[r,!r];l=l.slice(),r&&l.reverse(),l.length>1?l.forEach(function(M,_){var $=D(f,M,f[M]+i,P[_],O[_],!1,m);$===!1?i=0:(i=$-f[M],f[M]=$)}):P=O=[!0];var F=!1;l.forEach(function(M,_){F=oe(M,a[M]+i,P[_],O[_],!1,m)||F}),F&&(l.forEach(function(M){C("update",M),C("slide",M)}),u!=null&&C("drag",y))}function H(r,i){return e.dir?100-r-i:r}function N(r,i){g[r]=i,b[r]=p.fromStepping(i);var a=H(i,0)-te,l="translate("+U(a+"%","0")+")";if(S[r].style[e.transformRule]=l,e.events.invertConnects&&g.length>1){var u=g.every(function(f,y,m){return y===0||f>=m[y-1]});if(z!==!u){ye();return}}Re(r),Re(r+1),z&&(Re(r-1),Re(r+2))}function fe(){L.forEach(function(r){var i=g[r]>50?-1:1,a=3+(S.length+i*r);S[r].style.zIndex=String(a)})}function oe(r,i,a,l,u,f){return u||(i=D(g,r,i,a,l,!1,f)),i===!1?!1:(N(r,i),!0)}function Re(r){if(E[r]){var i=g.slice();z&&i.sort(function(m,P){return m-P});var a=0,l=100;r!==0&&(a=i[r-1]),r!==E.length-1&&(l=i[r]);var u=l-a,f="translate("+U(H(a,u)+"%","0")+")",y="scale("+U(u/100,"1")+")";E[r].style[e.transformRule]=f+" "+y}}function ae(r,i){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=p.toStepping(r)),r===!1||isNaN(r))?g[i]:r}function $e(r,i,a){var l=Je(r),u=g[0]===void 0;i=i===void 0?!0:i,e.animate&&!u&&Rt(v,e.cssClasses.tap,e.animationDuration),L.forEach(function(m){oe(m,ae(l[m],m),!0,!1,a)});var f=L.length===1?0:1;if(u&&p.hasNoSize()&&(a=!0,g[0]=0,L.length>1)){var y=100/(L.length-1);L.forEach(function(m){g[m]=m*y})}for(;f<L.length;++f)L.forEach(function(m){oe(m,g[m],!0,!0,a)});fe(),L.forEach(function(m){C("update",m),l[m]!==null&&i&&C("set",m)})}function rt(r){$e(e.start,r)}function me(r,i,a,l){if(r=Number(r),!(r>=0&&r<L.length))throw new Error("noUiSlider: invalid handle number, got: "+r);oe(r,ae(i,r),!0,!0,l),C("update",r),a&&C("set",r)}function be(r){if(r===void 0&&(r=!1),r)return b.length===1?b[0]:b.slice(0);var i=b.map(e.format.to);return i.length===1?i[0]:i}function Xe(){for(A(Ce.aria),A(Ce.tooltips),Object.keys(e.cssClasses).forEach(function(r){Ye(v,e.cssClasses[r])});v.firstChild;)v.removeChild(v.firstChild);delete v.noUiSlider}function Ke(r){var i=g[r],a=p.getNearbySteps(i),l=b[r],u=a.thisStep.step,f=null;if(e.snap)return[l-a.stepBefore.startValue||null,a.stepAfter.startValue-l||null];u!==!1&&l+u>a.stepAfter.startValue&&(u=a.stepAfter.startValue-l),l>a.thisStep.startValue?f=a.thisStep.step:a.stepBefore.step===!1?f=!1:f=l-a.stepBefore.highestStep,i===100?u=null:i===0&&(f=null);var y=p.countStepDecimals();return u!==null&&u!==!1&&(u=Number(u.toFixed(y))),f!==null&&f!==!1&&(f=Number(f.toFixed(y))),[f,u]}function Pe(){return L.map(Ke)}function nt(r,i){var a=be(),l=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];l.forEach(function(f){r[f]!==void 0&&(n[f]=r[f])});var u=Vt(n);l.forEach(function(f){r[f]!==void 0&&(e[f]=u[f])}),p=u.spectrum,e.margin=u.margin,e.limit=u.limit,e.padding=u.padding,e.pips?ne(e.pips):Fe(),e.tooltips?Be():q(),g=[],$e(ut(r.start)?r.start:a,i),r.connect&&Ee()}function Ee(){for(;x.firstChild;)x.removeChild(x.firstChild);for(var r=0;r<=e.handles;r++)E[r]=ce(x,e.connect[r]),Re(r);Ie({drag:e.events.drag,fixed:!0})}function ye(){z=!z,Ft(e,e.connect.map(function(r){return!r})),Ee()}function it(){w=Ge(v),se(e.connect,w),Ie(e.events),$e(e.start),e.pips&&ne(e.pips),e.tooltips&&Be(),de()}it();var Oe={destroy:Xe,steps:Pe,on:ge,off:A,get:be,set:$e,setHandle:me,reset:rt,disable:re,enable:J,__moveHandles:function(r,i,a){K(r,i,g,a)},options:n,updateOptions:nt,target:v,removePips:Fe,removeTooltips:q,getPositions:function(){return g.slice()},getTooltips:function(){return d},getOrigins:function(){return S},pips:ne};return Oe}function Fr(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=Vt(e),s=Ur(t,n,e);return t.noUiSlider=s,s}const Mr={__spectrum:Ot,cssClasses:Ut,create:Fr};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("upload-section"),e=document.getElementById("drop-zone"),n=document.getElementById("gif-input"),s=document.getElementById("processing-section"),o=document.getElementById("original-gif-preview"),h=document.getElementById("frame-canvas"),v=document.getElementById("total-frames"),w=document.getElementById("frame-range-slider"),x=document.getElementById("start-frame-display"),S=document.getElementById("end-frame-display"),E=document.getElementById("resize-width"),c=document.getElementById("resize-height"),d=document.getElementById("aspect-ratio-lock"),p=document.getElementById("text-input"),b=document.getElementById("text-color"),g=document.getElementById("font-size"),L=document.getElementById("compression-level"),R=document.getElementById("output-format"),k=document.getElementById("reverse-gif"),z=document.getElementById("clip-button"),j=document.getElementById("reset-button"),T=document.getElementById("editor-reset-btn"),ee=document.getElementById("result-section"),te=document.getElementById("result-gif"),B=document.getElementById("result-video"),W=document.getElementById("download-link"),ce=document.getElementById("back-to-start-button"),se=document.getElementById("output-info"),Ge=document.getElementById("loading-overlay"),We=document.getElementById("loading-text"),ue=h.getContext("2d"),Le=document.createElement("canvas");Le.getContext("2d");let re=[],J=0,q=0,Be=1,de=null,qe=null,he=0,xe=0,Ue=!1;n.addEventListener("change",ze),e.addEventListener("dragover",A=>{A.preventDefault(),e.classList.add("bg-indigo-100","border-indigo-500")}),e.addEventListener("dragleave",A=>{A.preventDefault(),e.classList.remove("bg-indigo-100","border-indigo-500")}),e.addEventListener("drop",A=>{A.preventDefault(),e.classList.remove("bg-indigo-100","border-indigo-500"),A.dataTransfer?.files.length&&(n.files=A.dataTransfer.files,ze({target:n}))}),[p,b,g].forEach(A=>{A.addEventListener("input",()=>{De(ie)})}),E.addEventListener("input",()=>_e("width")),c.addEventListener("input",()=>_e("height")),z.addEventListener("click",et),j.addEventListener("click",Ve),ce.addEventListener("click",Ve),T&&T.addEventListener("click",Fe);function Fe(){re.length&&(ie=0,ve=re.length-1,w?.noUiSlider?.set([ie,ve]),x.textContent=String(ie),S.textContent=String(ve),E.value=String(J),c.value=String(q),p.value="",b.value="#FFFFFF",g.value="32",L.value="80",k.checked=!1,De(ie))}const ne=new qt;let Me=!1;async function pe(){if(Me)return;Ie("正在初始化图像处理引擎，请稍候...");const A="https://unpkg.com/@ffmpeg/core@0.12.10/dist/esm";await ne.load({coreURL:await At(`${A}/ffmpeg-core.js`,"text/javascript"),wasmURL:await At(`${A}/ffmpeg-core.wasm`,"application/wasm")}),Me=!0}function Ve(){re=[],J=0,q=0,de=null,qe=null,n.value="",se&&(se.textContent=""),B&&(B.pause(),B.src="",B.classList.add("hidden")),te.classList.remove("hidden"),s.classList.add("hidden"),ee.classList.add("hidden"),t.classList.remove("hidden"),j.classList.add("hidden")}function ze(A){const D=A.target.files?.[0];if(!D||D.type!=="image/gif")return;Ve(),de=D,Ie("正在解析GIF..."),o.src=URL.createObjectURL(D);const U=new FileReader;U.onload=K=>{try{const H=K.target?.result;if(!(H instanceof ArrayBuffer))throw new Error("读取文件失败");const N=bt.parseGIF(new Uint8Array(H));re=bt.decompressFrames(N,!0),re.length?Qe():(alert("无法解析此GIF文件。"),ke())}catch(H){console.error("解析GIF失败:",H),alert("解析GIF时发生错误。"),ke()}},U.readAsArrayBuffer(D)}function Qe(){const A=re.length,C=re[0];J=h.width=Le.width=C.dims.width,q=h.height=Le.height=C.dims.height,Be=J/q,he=J/2,xe=q/2,v.textContent=String(A);const D=document.getElementById("gif-info-bar");D&&D.classList.remove("hidden");const U=document.getElementById("gif-filename");U&&de&&(U.textContent=de.name);const K=document.getElementById("gif-original-dims");K&&(K.textContent=`${J}x${q}`);const H=document.getElementById("gif-frame-count");H&&(H.textContent=String(A)),Ne(A),E.value=String(J),c.value=String(q),t.classList.add("hidden"),s.classList.remove("hidden"),j.classList.remove("hidden"),De(0),ke()}let ie=0,ve=0;function Ne(A){w&&(Mr.create(w,{start:[0,A-1],connect:!0,step:1,range:{min:0,max:A-1},format:{to:C=>Math.round(C),from:C=>Number(C)}}),w.noUiSlider?.on("update",(C,D)=>{ie=Number(C[0]),ve=Number(C[1]),x.textContent=String(ie),S.textContent=String(ve),De(D===0?ie:ve)}))}function _e(A){if(!d.checked)return;const C=parseInt(E.value,10),D=parseInt(c.value,10);A==="width"&&!isNaN(C)?c.value=String(Math.round(C/Be)):A==="height"&&!isNaN(D)&&(E.value=String(Math.round(D*Be)))}function De(A){if(A<0||A>=re.length)return;const C=document.createElement("canvas");C.width=J,C.height=q;const D=C.getContext("2d");let U=null;for(let H=0;H<=A;H+=1){const N=re[H];N.disposalType===2?D.clearRect(0,0,J,q):N.disposalType===3&&U&&D.putImageData(U,0,0),N.disposalType===3&&(U=D.getImageData(0,0,J,q));const fe=new Uint8ClampedArray(N.patch),oe=new ImageData(fe,N.dims.width,N.dims.height);D.putImageData(oe,N.dims.left,N.dims.top)}ue.clearRect(0,0,h.width,h.height),ue.drawImage(C,0,0,h.width,h.height);const K=p.value;K&&(ue.font=`${g.value}px Arial`,ue.fillStyle=b.value,ue.textAlign="center",ue.textBaseline="middle",ue.fillText(K,he,xe))}h.addEventListener("mousedown",A=>{p.value&&(Ue=!0)}),window.addEventListener("mousemove",A=>{if(!Ue)return;const C=h.getBoundingClientRect(),D=h.width/C.width,U=h.height/C.height;he=(A.clientX-C.left)*D,xe=(A.clientY-C.top)*U,he=Math.max(0,Math.min(he,h.width)),xe=Math.max(0,Math.min(xe,h.height)),De(ie)}),window.addEventListener("mouseup",()=>{Ue=!1});async function et(){Ie("准备处理...","导出速度将随 GIF 帧数、尺寸而变化，请耐心等待…"),z.disabled=!0;try{if(await pe(),ge("正在处理帧数据…","喝杯水，马上就好 _-_-_-_-_-_-_"),!de)throw new Error("未找到原始 GIF 文件");await ne.writeFile("input.gif",await Ct(de));const A=ie,C=ve,D=Number(E.value)||J,U=Number(c.value)||q,K=p.value,H=Number(g.value),N=b.value,fe=k.checked,oe=Math.min(200,Math.max(1,Number(L.value)||80)),Re=R?R.value:"gif";K&&await ne.writeFile("arial.ttf",await Ct("https://raw.githubusercontent.com/ffmpegwasm/testdata/master/arial.ttf"));const ae=[];if((A>0||C<re.length-1)&&(ae.push(`select='between(n\\,${A}\\,${C})'`),ae.push("setpts=N/FRAME_RATE/TB")),ae.push("fps=12"),fe&&ae.push("reverse"),(D!==J||U!==q)&&ae.push(`scale=${D}:${U}:flags=lanczos`),K){const l=K.replace(/'/g,"\\'"),u=he/J,f=xe/q;ae.push(`drawtext=fontfile=/arial.ttf:text='${l}':x=(w*${u})-text_w/2:y=(h*${f})-text_h/2:fontcolor=${N}:fontsize=${H}:shadowcolor=black:shadowx=1:shadowy=1`)}const rt=performance.now();let me,be="gif";if(Re==="gif"){const l=[...ae,"palettegen=max_colors=128"].join(",");await ne.exec(["-i","input.gif","-vf",l,"palette.png"]),ge("优化颜色中…","让画质更佳，体积更小");let u;const f=ae.join(",");f?u=`[0:v]${f}[x];[x][1:v]paletteuse`:u="[0:v][1:v]paletteuse",await ne.exec(["-i","input.gif","-i","palette.png","-filter_complex",u,"-loop","0","output.gif"]),ge("编码 GIF...","应用调色板并生成文件");const y=await ne.readFile("output.gif");me=new Blob([y],{type:"image/gif"}),me=await tt(me,oe),ge("优化质量...","使用 gifsicle 进一步压缩"),be="gif"}else{const l=ae.join(","),u=["-i","input.gif"];l&&u.push("-vf",l),u.push("-c:v","libvpx","-pix_fmt","yuv420p","-b:v","1M","-crf","30","output.webm"),await ne.exec(u),ge("编码 WebM...","即将完成");const f=await ne.readFile("output.webm");me=new Blob([f],{type:"video/webm"}),be="webm"}const Xe=re.length,Ke=({message:l})=>{if(typeof l=="string"&&l.includes("frame=")){const u=l.match(/frame=\s*(\d+)/);if(u){const f=Number(u[1]),y=Math.min(100,Math.round(f/Xe*100)),m=document.getElementById("loading-subtext");m&&(m.textContent=`已处理 ${f} / ${Xe} 帧 (${y}%)`)}}};ne.on("log",Ke);const Pe=URL.createObjectURL(me);be==="gif"?(te.src=Pe,te.classList.remove("hidden"),B&&(B.pause(),B.classList.add("hidden")),W.href=Pe,W.classList.remove("hidden"),qe=me):(B&&(B.src=Pe,B.load(),B.classList.remove("hidden"),B.play().catch(()=>{})),te.classList.add("hidden"),W.href=Pe,W.classList.remove("hidden"));const nt=de.name.replace(/\.gif$/i,""),Ee=new Date,ye=l=>String(l).padStart(2,"0"),it=`${ye(Ee.getFullYear()%100)}${ye(Ee.getMonth()+1)}${ye(Ee.getDate())}`,Oe=`${ye(Ee.getHours())}${ye(Ee.getMinutes())}${ye(Ee.getSeconds())}`,r=`${nt}-edited-${it}-${Oe}-${D}x${U}.${be}`;W.download=r;const i=((performance.now()-rt)/1e3).toFixed(1),a=(me.size/1024).toFixed(1);se&&(se.textContent=`${D}x${U} · ${be.toUpperCase()} · ${a} KB · ${i}s`),s.classList.add("hidden"),ee.classList.remove("hidden")}catch(A){console.error("生成 GIF 失败:",A),alert("生成 GIF 时发生错误，请重试。")}finally{ke(),z.disabled=!1}}async function tt(A,C){try{const{default:D}=await zt(async()=>{const{default:fe}=await import("./gifsicle.min.DKOL7GtU.js");return{default:fe}},[]),U=[{file:A,name:"input.gif"}],K=["--no-warnings","-O3",`--lossy=${C}`,"--colors","256","input.gif","-o","/out/out.gif"],H=await D.run({input:U,command:K}),N=H&&H[0];if(N instanceof File)return N;if(N&&N.data)return new Blob([N.data],{type:"image/gif"})}catch(D){console.warn("GIF 优化失败，使用原始文件",D)}return A}function Ie(A,C=""){We.textContent=A;const D=document.getElementById("loading-subtext");D&&(D.textContent=C),Ge.classList.remove("hidden")}function ge(A,C=""){We.textContent=A;const D=document.getElementById("loading-subtext");D&&(D.textContent=C)}function ke(){Ge.classList.add("hidden");const A=document.getElementById("loading-subtext");A&&(A.textContent="")}});
